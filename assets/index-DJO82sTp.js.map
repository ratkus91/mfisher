{"version":3,"file":"index-DJO82sTp.js","sources":["../../src/index.html?html-proxy&index=1.js"],"sourcesContent":["\n  import emailjs from \"@emailjs/browser\";\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    const buttons = document.querySelectorAll(\".hero__btn, .team__btn, .cta__btn, .accordion__btn, .process__btn\");\n    const popup = document.getElementById(\"popup\");\n    const closePopup = popup.querySelector(\".popup__close\");\n    const form = document.querySelector(\".order-form\");\n    const budgetOptions = document.querySelectorAll(\".budget-option\");\n    const errorContainer = document.getElementById(\"empty-error\");\n    const fileInput = document.getElementById(\"file-upload\");\n    const fileList = document.getElementById(\"file-list\");\n    const uploadedFiles = new Set();\n\n    const resetErrors = () => {\n      const fields = form.querySelectorAll(\".validate\");\n      fields.forEach((field) => {\n        field.classList.remove(\"field-error\");\n        const errorSpan = document.querySelector(`#${field.id}-error`);\n        if (errorSpan) errorSpan.textContent = \"\";\n      });\n      if (errorContainer) errorContainer.textContent = \"\";\n    };\n\n    buttons.forEach((button) => {\n      button.addEventListener(\"click\", () => {\n        popup.classList.add(\"is-open\");\n        document.querySelector(\"html\").classList.add(\"no-scroll\");\n      });\n    });\n\n    closePopup.addEventListener(\"click\", () => {\n      form.reset();\n      fileList.innerHTML = \"\";\n      budgetOptions.forEach((option) => option.classList.remove(\"selected\"));\n      uploadedFiles.clear();\n      popup.classList.remove(\"is-open\");\n      document.querySelector(\"html\").classList.remove(\"no-scroll\");\n      resetErrors(); // Удаляем ошибки при закрытии\n    });\n\n    popup.addEventListener(\"click\", (event) => {\n      if (event.target === popup) {\n        form.reset();\n        fileList.innerHTML = \"\";\n        budgetOptions.forEach((option) => option.classList.remove(\"selected\"));\n        uploadedFiles.clear();\n        popup.classList.remove(\"is-open\");\n        document.querySelector(\"html\").classList.remove(\"no-scroll\");\n        resetErrors(); // Удаляем ошибки при клике вне формы\n      }\n    });\n\n    const validateEmail = (email) => {\n      const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n      if (!emailRegex.test(email)) return false;\n\n      const domain = email.split(\"@\")[1];\n      const domainParts = domain.split(\".\");\n      if (domainParts.length < 2) return false;\n\n      const tld = domainParts[domainParts.length - 1];\n      return tld.length >= 2;\n    };\n\n    const validateField = (field) => {\n      const errorSpan = document.querySelector(`#${field.id}-error`);\n      if (field.type === \"email\") {\n        if (!validateEmail(field.value)) {\n          errorSpan.textContent = \"Invalid E-mail\";\n          return false;\n        }\n      } else if (!field.checkValidity()) {\n        const errorMessage = field.getAttribute(\"data-error-message\") || \"Invalid field.\";\n        errorSpan.textContent = errorMessage;\n        return false;\n      } else {\n        errorSpan.textContent = \"\";\n      }\n      return true;\n    };\n\n    const validateFiles = () => {\n      const files = fileInput.files;\n      const allowedExtensions = [\"doc\", \"docx\", \"pdf\", \"ppt\", \"pptx\", \"xlsx\", \"zip\", \"rar\"];\n      const maxFileSize = 30 * 1024 * 1024; // 30MB\n      const maxFiles = 3;\n\n      if (!errorContainer) return false;\n\n      for (let file of files) {\n        const extension = file.name.split(\".\").pop().toLowerCase();\n\n        if (uploadedFiles.has(file.name)) {\n          errorContainer.textContent = `File ${file.name} is already added.`;\n          continue;\n        }\n\n        if (!allowedExtensions.includes(extension)) {\n          errorContainer.textContent = `Unsupported file format: ${file.name}`;\n          return false;\n        }\n\n        if (file.size > maxFileSize) {\n          errorContainer.textContent = `File ${file.name} exceeds the 30MB size limit.`;\n          return false;\n        }\n\n        if (uploadedFiles.size >= maxFiles) {\n          errorContainer.textContent = `You can attach up to ${maxFiles} files.`;\n          return false;\n        }\n\n        const listItem = document.createElement(\"li\");\n        listItem.classList.add(\"file__item\");\n\n        const fileName = document.createElement(\"span\");\n        fileName.textContent = file.name;\n\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.innerHTML = '<span class=\"icon icon-close\"></span>';\n        deleteButton.classList.add(\"btn-del\");\n        deleteButton.addEventListener(\"click\", () => {\n          listItem.remove();\n          uploadedFiles.delete(file.name);\n          errorContainer.textContent = \"\";\n        });\n\n        listItem.appendChild(fileName);\n        listItem.appendChild(deleteButton);\n        fileList.appendChild(listItem);\n        uploadedFiles.add(file.name);\n      }\n\n      errorContainer.textContent = \"\";\n      return true;\n    };\n\n    const validateForm = () => {\n      let isValid = true;\n      const fields = form.querySelectorAll(\".validate\");\n\n      fields.forEach((field) => {\n        if (field.id && !validateField(field)) {\n          isValid = false;\n          field.classList.add(\"field-error\");\n        } else {\n          field.classList.remove(\"field-error\");\n        }\n      });\n\n      if (!validateFiles()) {\n        isValid = false;\n      }\n\n      return isValid;\n    };\n\n    form.addEventListener(\"submit\", (e) => {\n      e.preventDefault();\n\n      if (validateForm()) {\n        errorContainer.textContent = \"\";\n        const formData = new FormData(form);\n\n        emailjs.init(\"lLSKvVcx1LQ3lQ7Qy\");\n\n        const data = {\n          user_name: formData.get(\"user-name\"),\n          user_email: formData.get(\"user-email\"),\n          user_phone: formData.get(\"user-phone\"),\n          user_comment: formData.get(\"user-comment\"),\n          project_budget:\n            document.querySelector(\".budget-option.selected\")?.getAttribute(\"data-value\") || \"Not specified\",\n          user_nda: formData.get(\"user-nda\") ? \"Yes\" : \"No\",\n        };\n\n        emailjs\n          .send(\"service_d3x1f1d\", \"template_9nakrge\", data)\n          .then(() => {\n            const popupMini = document.getElementById(\"popup-mini\");\n            popupMini.classList.remove(\"hide\");\n            popupMini.classList.add(\"is-open\");\n\n            popupMini.querySelector(\".popup-mini__close-btn\").addEventListener(\"click\", () => {\n              popupMini.classList.remove(\"is-open\");\n              popupMini.classList.add(\"hide\");\n\n              form.reset();\n              fileList.innerHTML = \"\";\n              budgetOptions.forEach((option) => option.classList.remove(\"selected\"));\n              uploadedFiles.clear();\n              resetErrors();\n            });\n          })\n          .catch((error) => {\n            console.error(\"Error submitting form:\", error);\n            alert(\"There was an error submitting the form.\");\n          });\n      } else {\n        errorContainer.textContent = \"Please fix the errors above before submitting.\";\n      }\n    });\n\n    fileInput.addEventListener(\"change\", validateFiles);\n  });\n"],"names":["buttons","popup","closePopup","form","budgetOptions","errorContainer","fileInput","fileList","uploadedFiles","resetErrors","field","errorSpan","button","option","event","validateEmail","email","domainParts","validateField","errorMessage","validateFiles","files","allowedExtensions","maxFileSize","maxFiles","file","extension","listItem","fileName","deleteButton","validateForm","isValid","formData","emailjs","data","_a","popupMini","error"],"mappings":"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"}