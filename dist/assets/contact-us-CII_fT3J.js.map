{"version":3,"file":"contact-us-CII_fT3J.js","sources":["../../src/contact-us.html?html-proxy&index=2.js"],"sourcesContent":["\n      import intlTelInput from \"intl-tel-input\";\n\n      document.addEventListener(\"DOMContentLoaded\", () => {\n        const form = document.querySelector(\".order-form\");\n        const budgetOptions = document.querySelectorAll(\".budget-option\");\n        const errorContainer = document.getElementById(\"empty-error\");\n        const fileInput = document.getElementById(\"file-upload\");\n        const fileList = document.getElementById(\"file-list\");\n\n        const uploadedFiles = new Set();\n\n        const validateEmail = (email) => {\n          const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n          if (!emailRegex.test(email)) return false;\n\n          const domain = email.split(\"@\")[1];\n          const domainParts = domain.split(\".\");\n          if (domainParts.length < 2) return false;\n\n          const tld = domainParts[domainParts.length - 1];\n          return tld.length >= 2;\n        };\n\n        const validateField = (field) => {\n          const errorSpan = document.querySelector(`#${field.id}-error`);\n          if (field.type === \"email\") {\n            if (!validateEmail(field.value)) {\n              errorSpan.textContent = \"Invalid E-mail\";\n              return false;\n            }\n          } else if (!field.checkValidity()) {\n            const errorMessage = field.getAttribute(\"data-error-message\") || \"Invalid field.\";\n            errorSpan.textContent = errorMessage;\n            return false;\n          } else {\n            errorSpan.textContent = \"\";\n          }\n          return true;\n        };\n\n        const textarea = document.getElementById(\"user-comment\");\n        const counter = document.getElementById(\"char-counter\");\n        const maxLength = parseInt(textarea.getAttribute(\"minlength\"), 10);\n\n        const updateCounter = () => {\n          const inputValue = textarea.value;\n          const validLength = inputValue.length;\n\n          counter.textContent = `${validLength}/${maxLength}`;\n          if (validLength > maxLength) {\n            counter.classList.add(\"error\");\n          } else {\n            counter.classList.remove(\"error\");\n          }\n        };\n\n        textarea.addEventListener(\"input\", updateCounter);\n\n        const validateFiles = () => {\n          const files = fileInput.files;\n          const allowedExtensions = [\"doc\", \"docx\", \"pdf\", \"ppt\", \"pptx\", \"xlsx\", \"zip\", \"rar\"];\n          const maxFileSize = 30 * 1024 * 1024; // 30MB\n          const maxFiles = 3;\n\n          if (!errorContainer) return false;\n\n          let newFilesCount = 0;\n\n          for (let file of files) {\n            const extension = file.name.split(\".\").pop().toLowerCase();\n\n            if (uploadedFiles.has(file.name)) {\n              errorContainer.textContent = `File ${file.name} is already added.`;\n              continue;\n            }\n\n            if (!allowedExtensions.includes(extension)) {\n              errorContainer.textContent = `Unsupported file format: ${file.name}`;\n              return false;\n            }\n\n            if (file.size > maxFileSize) {\n              errorContainer.textContent = `File ${file.name} exceeds the 30MB size limit.`;\n              return false;\n            }\n\n            if (uploadedFiles.size >= maxFiles) {\n              errorContainer.textContent = `You can attach up to ${maxFiles} files.`;\n              return false;\n            }\n\n            const listItem = document.createElement(\"li\");\n            listItem.classList.add(\"file__item\");\n\n            const fileName = document.createElement(\"span\");\n            fileName.textContent = file.name;\n\n            const deleteButton = document.createElement(\"button\");\n            deleteButton.innerHTML = '<span class=\"icon icon-close\"></span>';\n            deleteButton.classList.add(\"btn-del\");\n            deleteButton.addEventListener(\"click\", () => {\n              listItem.remove();\n              uploadedFiles.delete(file.name);\n              fileInput.value = \"\";\n              errorContainer.textContent = \"\";\n              newFilesCount--;\n            });\n\n            listItem.appendChild(fileName);\n            listItem.appendChild(deleteButton);\n            fileList.appendChild(listItem);\n            uploadedFiles.add(file.name);\n            newFilesCount++;\n          }\n\n          errorContainer.textContent = \"\";\n          return true;\n        };\n\n        const validateForm = () => {\n          let isValid = true;\n          const fields = form.querySelectorAll(\".validate\");\n\n          fields.forEach((field) => {\n            if (field.id && !validateField(field)) {\n              isValid = false;\n              field.classList.add(\"field-error\");\n            } else {\n              field.classList.remove(\"field-error\");\n            }\n          });\n\n          if (!validateFiles()) {\n            isValid = false;\n          }\n\n          return isValid;\n        };\n\n        const handleBudgetSelection = (event) => {\n          budgetOptions.forEach((option) => option.classList.remove(\"selected\"));\n          event.target.classList.add(\"selected\");\n        };\n\n        form.addEventListener(\"submit\", async (e) => {\n          e.preventDefault();\n\n          if (validateForm()) {\n            errorContainer.textContent = \"\";\n            const formData = new FormData(form);\n\n            const budgetElement = document.querySelector(\".budget-option.selected\");\n            if (budgetElement) {\n              formData.append(\"user-budget\", budgetElement.dataset.value);\n            }\n\n            try {\n              const response = await fetch(\"https://mfisher.agency/send-email.php\", {\n                method: \"POST\",\n                body: formData,\n              });\n\n              if (response.ok) {\n                alert(\"Your request has been successfully sent!\");\n                form.reset();\n                fileList.innerHTML = \"\";\n                budgetOptions.forEach((option) => option.classList.remove(\"selected\"));\n                uploadedFiles.clear();\n              } else {\n                throw new Error(\"Failed to send the request.\");\n              }\n            } catch (error) {\n              console.error(\"Error submitting form:\", error);\n              alert(\"There was an error submitting the form.\");\n            }\n          } else {\n            errorContainer.textContent = \"Please fix the errors above before submitting.\";\n          }\n        });\n\n        budgetOptions.forEach((option) => {\n          option.addEventListener(\"click\", handleBudgetSelection);\n        });\n        fileInput.addEventListener(\"change\", validateFiles);\n      });\n    "],"names":["form","budgetOptions","errorContainer","fileInput","fileList","uploadedFiles","validateEmail","email","domainParts","validateField","field","errorSpan","errorMessage","textarea","counter","maxLength","updateCounter","validLength","validateFiles","files","allowedExtensions","maxFileSize","maxFiles","file","extension","listItem","fileName","deleteButton","validateForm","isValid","handleBudgetSelection","event","option","formData","budgetElement","error"],"mappings":"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"}